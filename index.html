<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Main Tab</title>
    <link rel="icon" type="image/x-icon" href="../issue.png" />
  </head>
  <body>
    <h1>mobile testing</h1>

    <script>
      // working method 1 starts here
      // let currentWindow = window;

      // window.open("https://google.com", "_blank", "width=800,height=600");

      // function newTab() {
      //   let tab = window.open("", "_blank");
      //   if (tab) {
      //     tab.close();
      //   }
      // }

      // newtAb();

      // currentWindow.focus();
      // working method 1 ends here

      //
      var puShown = false;
      var PopWidth = 1370;
      var PopHeight = 800;
      var PopFocus = 0;
      var _Top = null;

      function GetWindowHeight() {
        var myHeight = 0;
        if (typeof _Top.window.innerHeight == "number") {
          myHeight = _Top.window.innerHeight;
        } else if (
          _Top.document.documentElement &&
          _Top.document.documentElement.clientHeight
        ) {
          myHeight = _Top.document.documentElement.clientHeight;
        } else if (_Top.document.body && _Top.document.body.clientHeight) {
          myHeight = _Top.document.body.clientHeight;
        }
        return myHeight;
      }

      function GetWindowWidth() {
        var myWidth = 0;
        if (typeof _Top.window.innerWidth == "number") {
          myWidth = _Top.window.innerWidth;
        } else if (
          _Top.document.documentElement &&
          _Top.document.documentElement.clientWidth
        ) {
          myWidth = _Top.document.documentElement.clientWidth;
        } else if (_Top.document.body && _Top.document.body.clientWidth) {
          myWidth = _Top.document.body.clientWidth;
        }
        return myWidth;
      }

      function GetWindowTop() {
        return _Top.window.screenTop != undefined
          ? _Top.window.screenTop
          : _Top.window.screenY;
      }

      function GetWindowLeft() {
        return _Top.window.screenLeft != undefined
          ? _Top.window.screenLeft
          : _Top.window.screenX;
      }

      function doOpen(url) {
        var popURL = "about:blank";
        var popID = "ad_" + Math.floor(89999999 * Math.random() + 10000000);
        var pxLeft = 0;
        var pxTop = 0;
        pxLeft = GetWindowLeft() + GetWindowWidth() / 2 - PopWidth / 2;
        pxTop = GetWindowTop() + GetWindowHeight() / 2 - PopHeight / 2;
        if (puShown == true) {
          return true;
        }
        var PopWin = _Top.window.open(
          popURL,
          popID,
          "toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,top=" +
            pxTop +
            ",left=" +
            pxLeft +
            ",width=" +
            PopWidth +
            ",height=" +
            PopHeight
        );
        if (PopWin) {
          puShown = true;
          if (PopFocus == 0) {
            PopWin.blur();
            if (navigator.userAgent.toLowerCase().indexOf("applewebkit") > -1) {
              _Top.window.blur();
              _Top.window.focus();
            }
          }
          PopWin.Init = function (e) {
            with (e) {
              Params = e.Params;
              Main = function () {
                if (typeof window.mozPaintCount != "undefined") {
                  var x = window.open("about:blank");
                  x.close();
                }
                var popURL = Params.PopURL;
                try {
                  opener.window.focus();
                } catch (err) {}
                window.location = popURL;
              };
              Main();
            }
          };
          PopWin.Params = {
            PopURL: url,
          };
          PopWin.Init(PopWin);
        }
        return PopWin;
      }

      function setCookie(name, value, time) {
        var expires = new Date();
        expires.setTime(expires.getTime() + time);
        document.cookie =
          name +
          "=" +
          value +
          "; path=/;" +
          "; expires=" +
          expires.toGMTString();
      }

      function getCookie(name) {
        var cookies = document.cookie.toString().split("; ");
        var cookie, c_name, c_value;
        for (var n = 0; n < cookies.length; n++) {
          cookie = cookies[n].split("=");
          c_name = cookie[0];
          c_value = cookie[1];
          if (c_name == name) {
            return c_value;
          }
        }
        return null;
      }

      function initPu() {
        _Top = self;
        if (top != self) {
          try {
            if (top.document.location.toString()) _Top = top;
          } catch (err) {}
        }
        if (document.attachEvent) {
          document.attachEvent("onclick", checkTarget);
        } else if (document.addEventListener) {
          document.addEventListener("click", checkTarget, false);
        }
      }

      function checkTarget(e) {
        if (!getCookie("popundr")) {
          var e = e || window.event;
          var win = doOpen("http://www.mediamoby.com/4g9s0hc8/");
          setCookie("popundr", 1, 24 * 60 * 60 * 1000);
        }
      }
      initPu();
      // var mobile =
      //   /iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(
      //     navigator.userAgent.toLowerCase()
      //   );
      // if (mobile) {
      //   alert("MOBILE DEVICE DETECTED");
      //   console.log(mobile, "in if");
      // } else {
      //   alert("NO MOBILE DEVICE DETECTED");
      //   console.log(mobile, "in else");
      // }

      // let url = "http://youtube.com";
      // let newWindow = window.open(
      //   url,
      //   "_blank",
      //   "resizable=yes, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no"
      // );
      // window.addEventListener("focus", function () {
      //   console.log("Focus is on index.html");
      //   const b = document.querySelector("body");
      //   b.style.backgroundColor = "yellow";
      // });
      // if (newWindow) {
      //   newWindow.blur();
      //   newWindow.addEventListener("focus", function () {
      //     console.log(newWindow, "this is newwindow");
      //     setTimeout(() => {
      //       if (document.activeElement === newWindow) {
      //         window.focus();
      //         console.log("Focus switched to index.html from youtube.com");
      //       }
      //     }, 0);
      //     console.log("Focus is on youtube.com 1st");
      //   });
      // }

      // if (newWindow) {
      //   requestFullscreen(newWindow);
      // }

      // function requestFullscreen(element) {
      //   if (element.requestFullscreen) {
      //     element.requestFullscreen();
      //   } else if (element.mozRequestFullScreen) {
      //     // Firefox
      //     element.mozRequestFullScreen();
      //   } else if (element.webkitRequestFullscreen) {
      //     // Chrome, Safari and Opera
      //     element.webkitRequestFullscreen();
      //   } else if (element.msRequestFullscreen) {
      //     // IE/Edge
      //     element.msRequestFullscreen();
      //   }
      // }

      // if (window.innerWidth <= 600 || mobile) {
      //   console.log(window.innerWidth, "the width of the actual mobile window");
      //   document.body.style.backgroundColor = "red";

      //   window.addEventListener("load", function () {
      //     window.focus();

      //     setTimeout(function () {
      //       let googleTab = window.open("http://google.com", "_blank");
      //       if (googleTab) {
      //         console.log("Focus is on google.com");
      //         setTimeout(function () {
      //           googleTab.close();
      //           window.focus();
      //         }, 100);
      //       }
      //     }, 500);
      //   });
      // } else {
      //   let MINUTE_MILLISECONDS = 60000;
      //   let now = new Date().getTime();

      //   if (
      //     !localStorage.t ||
      //     now > parseInt(localStorage.t) + MINUTE_MILLISECONDS
      //   ) {
      //     localStorage.t = now;
      //     window.location.href = "http://youtube.com/";
      //     window.open(window.document.URL, "_blank");
      //     console.log("Focus is on youtube.com 2nd");
      //   }

      //   window.addEventListener("beforeunload", function () {
      //     localStorage.clear();
      //   });
      // }
      // 3
      // window.open("http://google.com", "");
      // window.open().close();
    </script>
  </body>
</html>
